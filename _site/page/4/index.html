<!DOCTYPE html>
<html>

<head>

  <title>xl : 乌托邦</title>

  

  <meta name="author" content="xiaobin">

  <!-- Enable responsive viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
  <link rel="stylesheet" type="text/css" href="/assets/resources/syntax/syntax.css">
  <link rel="stylesheet" type="text/css" href="/assets/resources/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/assets/resources/font-awesome/css/font-awesome.min.css">
  <link rel="icon" href="https://raw.githubusercontent.com/talk2ankan/uno-dbyll/gh-pages/uno-dbyll.png">

  <link href='http://fonts.googleapis.com/css?family=Raleway:300' rel='stylesheet' type='text/css'>

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.js"></script>

  <!-- 数学公式 -->
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    type="text/javascript"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        inlineMath: [['$','$']]
      }
    });
  </script>
  <script type="text/javascript">
    $(document).ready(function () {
      if (window.location.href == "http://blog.ankanbiswas.in/uno-dbyll/") {
        $("#sidebar").css({ width: '100%' });
        $("#btnblog").click(function () {
          $("#sidebar").animate({ width: '33.3333%' }, 'slow');
        });
      }
    });

  </script>
</head>

<body>

  <nav class="navbar navbar-default visible-xs" role="navigation">


    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarHeaderCollapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a type="button" class="navbar-toggle nav-link" href="http://github.com/xiaobin0860">
        <i class="fa fa-github"></i>
      </a>
      
      
      
      <a type="button" class="navbar-toggle nav-link" href="mailto:l_xb@foxmail.com">
        <i class="fa fa-envelope"></i>
      </a>
      



      <a class="navbar-brand" href="">
        <img src="https://xiaobin0860.github.io/imgs/head.jpg" class="img-circle" style="height:35px;width:35px" />
        乌托邦
      </a>
    </div>


    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbarHeaderCollapse">
      <ul class="nav navbar-nav">
        <li class="active"><a
            href="">Home</a></li>
        <li><a href="/categories.html">Categories</a></li>
        <li><a href="/tags.html">Tags</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->

  </nav>

  <!-- nav-menu-dropdown -->
  <div class="btn-group hidden-xs" id="nav-menu">
    <button type="button" class="btn btn-default dropdown-toggle pull-right" data-toggle="dropdown">
      <i class="fa fa-bars"></i>
    </button>
    <ul class="dropdown-menu pull-right" role="menu">
      <li><a href=""><i
            class="fa fa-home"></i> Home</a></li>
      <li><a href="/categories.html"><i class="fa fa-folder"></i> Categories</a></li>
      <li><a href="/tags.html"><i class="fa fa-tags"></i> Tags</a></li>
      <li class="divider"></li>
      <li><a href="#"><i class="fa fa-arrow-up"></i> Top of Page</a></li>
    </ul>
  </div>

  <div class="col-sm-4 sidebar hidden-xs" id="sidebar">
    <! -- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="">
		<img src="https://xiaobin0860.github.io/imgs/head.jpg" class="img-circle" style="border-radius: 50%;
border: 3px solid #FFF; height:150px;width:150px" />
	</a>
	<h3 class="title">
        <a href="">乌托邦</a>
         <p style="font-size:20px;">xl</p>
    </h3>
    
    <hr class="hr-line">
<h3 class="title">
         <p style="font-size:18px">Stay hungry, Stay foolish.</p>
    </h3>

    <hr class="hr-line1">
 <h3 class="title" style="font-size:30px;">
 
       
      <a type="button" class="social1" href="http://github.com/xiaobin0860">
        <i class="fa fa-github"></i>
      </a>
      
       
     
      
      <a type="button" class="social3" href="mailto:l_xb@foxmail.com">
        <i class="fa fa-envelope"></i>
      </a>
      
       <hr class="hr-line1">
       <a type="button"  style="font-size:20px; padding:7px; padding-left:13px;padding-right:13px;margin-right: 10px;" class="social3 " id="btnblog" href="/#blog">
        <i class="fa" style="font-weight:bold;letter-spacing:0; font-family:arial,sans-serif">Blog</i>
      </a>
      </h3>

</header>



<! -- sidebar.html end -->

  </div>

  <div class="col-sm-8 col-sm-offset-4" id="container">
    <br/>


<article class="home">

  <h2>
 <p class="post-date">
    
    January
    11th,
    
    2016
  </p>
    <a href="/2dx-debug" style="font-family: ubuntu">记录一次内存错误debug</a>
  </h2>

  <div style="font-family: 'Raleway', sans-serif;font-size:large">
    
    
    <p>项目在某页面崩溃，ide断在EventDispatcher::cleanToRemovedListeners()。
据断点处信息_toRemovedListeners里有的值retaincount已经为0了，一定是多释放了。
但找半天没找到哪些地方用的不对，都是在onEnter里添加监听，在onExit里取消监听。
去到2dx里代码仓库看最新的提交也没发现有修复类似bug的，应该还是自己代码的原因。
最后没办法了，在所有代码使用listener的地方，添加时先retain，remove时再release。
改着改着就发现一个自定义控件的一个方法在remove里没把listener指针置空，导致onExit时
又释放了一遍。再回头看崩溃页面，果然用到过这个控件。我*</p>

    
    
    <hr class="hr-line1 " style="background-color:#D8D8D8;width:25%;" align="left">
  </div>
</article>


<article class="home">

  <h2>
 <p class="post-date">
    
    January
    10th,
    
    2016
  </p>
    <a href="/fist-post" style="font-family: ubuntu">My first post</a>
  </h2>

  <div style="font-family: 'Raleway', sans-serif;font-size:large">
    
    
    <p>Stay hungry, Stay foolish.<br />
求知若饥，虚心若愚。<br />
2016.1.10</p>

<hr />

<p><img src="https://xiaobin0860.github.io/imgs/20160110.jpg" alt="小宝" /></p>


    
    
    <hr class="hr-line1 " style="background-color:#D8D8D8;width:25%;" align="left">
  </div>
</article>


<article class="home">

  <h2>
 <p class="post-date">
    
    January
    8th,
    
    2016
  </p>
    <a href="/autobuild(2)" style="font-family: ubuntu">AutoBuild(2)</a>
  </h2>

  <div style="font-family: 'Raleway', sans-serif;font-size:large">
    
    
    <h2 id="websocket">Websocket</h2>

    
    
    <hr class="hr-line1 " style="background-color:#D8D8D8;width:25%;" align="left">
  </div>
</article>


<article class="home">

  <h2>
 <p class="post-date">
    
    January
    8th,
    
    2016
  </p>
    <a href="/autobuild(1)" style="font-family: ubuntu">AutoBuild(1)</a>
  </h2>

  <div style="font-family: 'Raleway', sans-serif;font-size:large">
    
    
    <p>之前做过几个项目，项目版本发布管理都是件令人头疼的事。资源管理、程序打包有太多人工操作在里面，
只要涉及到人式操作就难免出错。使用打包脚本会减少部分操作，但是每次发版甚至是测试人员要包都很麻烦，
一着急还容易出错。一直想实现一个自动打包、发布系统，减少发布打包人为的修改操作。从页面上直接可以看到
项目各平台编译状况，测试也可以直接从上面下载安装。</p>

<pre><code>架构、思路

                版本管理系统
                    |
               代码库版本变化
                    |
                ---------
                |       |
                V       V
            平台编译 平台编译
             服务器   服务器
                        |
                        V
                    编译、打包系统
                        |
                        |
                        V
                    管理服务器
                        |
                        V
                       结果
反向：从管理服务器发发布请求到指定平台，平台服务器再向代码仓库拉取最新代码，进行编译。
</code></pre>

<p>目前已经实现代码库变化，通知编译服务器编译、打包。该系统使用Erlang语言+各种脚本实现。遇到一些问题记录如下：</p>

<ol>
  <li>
    <p>svn提交通知，repos/hooks/下面参照post-commit.tmpl写post-commit脚本</p>
  </li>
  <li>
    <p>svn check update，<code>svn status -u -q</code>，返回结果前面带<code>*</code>的是要更新的</p>
  </li>
  <li>erlang集群端口管理
    <ul>
      <li>epmd端口默认4369，使用erl的<code>-epmd "epmd -port 5000 -daemon"</code>参数调整</li>
      <li>结点通讯端口使用erl的<code>-kernel inet_dist_listen_min 4000 inet_dist_listen_max 4000</code>控制</li>
      <li>集群cookie必须相同, erl的<code>-setcookie xxxxx</code>可以设置，当然也可能通过HOME下<code>.erlang.cookie</code>文件修改</li>
    </ul>
  </li>
  <li>本想直接利用Erlang天然的分布式支持实现远程通知，可能因为svn服务器对外端口转发我做不了(没权限)，最终没有实现。
我所在办公室做了外网端口转发的两台机器是可以实现的。理论上实现目前的功能，svn服务器只要远程调用通知我的编译服务器，
而我的服务器是做过端口转发的，应该能调到才前。不知道什么原因始终调不到。以后有时间再看是什么原因吧。也考虑过使用thrift，
但之前用过，感觉在erlang中使用不是很方便，再加上考虑到以后要有web界面展示，干脆使用ChicagoBoss实现算了。立马使用ChicagoBoss
创建工程，post-commit直接请求url通知，加上之前积累的编译、打包脚本，很快上面流程里的功能实现了。现在测试来要包立马就有新包了^_^</li>
</ol>

<hr />

<p><img src="https://xiaobin0860.github.io/imgs/20160108.jpg" alt="亲" /></p>


    
    
    <hr class="hr-line1 " style="background-color:#D8D8D8;width:25%;" align="left">
  </div>
</article>


<article class="home">

  <h2>
 <p class="post-date">
    
    January
    6th,
    
    2016
  </p>
    <a href="/markdown" style="font-family: ubuntu">markdown syntax</a>
  </h2>

  <div style="font-family: 'Raleway', sans-serif;font-size:large">
    
    
    <p>Markdown is a superset of HTML, so any HTML file is a valid Markdown.</p>

<!-- This means we can use HTML elements in Markdown. -->

<h2 id="headings">Headings</h2>

<h1 id="this-is-an-h1">This is an h1</h1>

<h2 id="this-is-an-h2">This is an h2</h2>

<h3 id="this-is-an-h3">This is an h3</h3>

<h4 id="this-is-an-h4">This is an h4</h4>

<h5 id="this-is-an-h5">This is an h5</h5>

<h6 id="this-is-an-h6">This is an h6</h6>

<h1 id="this-is-an-h1-1">This is an h1</h1>

<h2 id="this-is-an-h2-1">This is an h2</h2>

<h2 id="text-styles">Text styles</h2>

<p><em>This text is in italics.</em><br />
<em>And so is this text</em></p>

<p><strong>This text is in bold</strong><br />
<strong>And so is this text</strong></p>

<p><strong><em>This text is in both.</em></strong></p>

<p><del>This text is rendered with strikethrough.</del></p>

<p><code>monospace</code></p>

<h2 id="paragraphs">Paragraphs</h2>

<p>This is a paragraph.</p>

<p>Now I’m in paragraph 2.
I’m still in paragraph 2 too!</p>

<p>I’m in paragraph three!</p>

<p>Leave 2 spaces at the end of a line to to a<br />
line break</p>

<blockquote>
  <p>This is a block quote. You can</p>
</blockquote>

<blockquote>
  <p>manually wrap your lines and put a <code>&gt;</code> before every line.
You can also use more than one level</p>

  <blockquote>
    <p>of indentation.
How neat is that?</p>
  </blockquote>
</blockquote>

<h2 id="lists">Lists</h2>

<p>Unordered lists</p>

<ul>
  <li>Item1</li>
  <li>Item2</li>
  <li>Item3</li>
</ul>

<p>or</p>

<ul>
  <li>Item1</li>
  <li>Item2</li>
  <li>Item3</li>
</ul>

<p>or</p>

<ul>
  <li>Item1</li>
  <li>Item2</li>
  <li>Item3</li>
</ul>

<p>Ordered lists</p>

<ol>
  <li>Item1
    <ul>
      <li>Sub1</li>
      <li>Sub2</li>
      <li>Sub3</li>
    </ul>
  </li>
  <li>Item2</li>
  <li>Item3</li>
</ol>

<h2 id="code-blocks">Code blocks</h2>

<p>You can indicate a code block by indenting a line with four spaces or a tab.</p>

<pre><code>-module(test).
-export([test/0]).

test() -&gt;
    io:format("Hello World!~n").
</code></pre>

<p>json code block, use <strong>```</strong></p>

<pre><code class="language-json">{
  "data": {
    "uid": 4097
  }
}
</code></pre>

<h2 id="tables">tables</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Mac 快捷键</th>
      <th style="text-align: left">Win 快捷键</th>
      <th style="text-align: left">作用</th>
      <th style="text-align: left">备注</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Cmd + ←</strong></td>
      <td style="text-align: left"><strong>Fn + ←</strong></td>
      <td style="text-align: left">将光标定位到当前行的最左侧</td>
      <td style="text-align: left">很常用</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Cmd + →</strong></td>
      <td style="text-align: left"><strong>Fn + →</strong></td>
      <td style="text-align: left">将光标定位到当前行的最右侧</td>
      <td style="text-align: left">很常用</td>
    </tr>
    <tr>
      <td style="text-align: left">Cmd + ↑</td>
      <td style="text-align: left">Ctrl + Home</td>
      <td style="text-align: left">将光标定位到文章的第一行</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Cmd + ↓</td>
      <td style="text-align: left">Ctrl + End</td>
      <td style="text-align: left">将光标定位到文章的最后一行</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h2 id="links">Links</h2>

<p><a href="http://xiaobin0860.github.io">xl000</a><br />
<a href="mailto:l_xb@foxmail.com">l_xb@foxmail.com</a></p>

    
    
    <hr class="hr-line1 " style="background-color:#D8D8D8;width:25%;" align="left">
  </div>
</article>

<hr/>

<ul class="pager"> 

  
  <li class="previous">
    
    <a href="/page/3">&larr; Newer</a>
    
  </li>
  
  
  <li>
    <span class="page_number">Page: 4 of 4</span>
  </li>

  
  <li class="next disabled">
    <a>Older &rarr;</a>        
  </li>
  

</ul>


    <footer class="navbar navbar-default">
      <div class="container">
        <p class="navbar-text pull-left">Some rights reserved &copy; 2023 xiaobin. </br>
          Created using <a class="navbar-button" href="https://github.com/twbs/bootstrap">Bootstrap3</a> and <a
            class="navbar-button" href="https://github.com/jekyll/jekyll">Jekyll</a>. Theme : <a class="navbar-button"
            href="https://github.com/talk2ankan/uno-dbyll">uno-dbyll</a> by talk2ankan.
        </p>
      </div>
    </footer>
  </div>

  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'talk2ankan'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
  </script>

</body>

</html>