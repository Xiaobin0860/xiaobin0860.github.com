<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>xl000&#39;s blog</title>
    <description>xl000&#39;s blog
</description>
    <link>http://xiaobin0860.github.io/</link>
    <atom:link href="http://xiaobin0860.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 13 Jan 2016 00:22:47 +0800</pubDate>
    <lastBuildDate>Wed, 13 Jan 2016 00:22:47 +0800</lastBuildDate>
    <generator>Jekyll v3.0.1</generator>
    
      <item>
        <title>erlang/opt doc</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://xiaobin0860.github.io/otp_doc/doc/index.html&quot;&gt;erlang/opt doc&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Tue, 12 Jan 2016 00:00:00 +0800</pubDate>
        <link>http://xiaobin0860.github.io/erlang/2016/01/12/otp-doc.html</link>
        <guid isPermaLink="true">http://xiaobin0860.github.io/erlang/2016/01/12/otp-doc.html</guid>
        
        
        <category>erlang</category>
        
      </item>
    
      <item>
        <title>erlang执行shell</title>
        <description>&lt;h2 id=&quot;oscmdcmd&quot;&gt;os:cmd(Cmd)&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cmd(Command) -&amp;gt; string()
Types:
Command = atom() | io_lib:chars()
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;erlangopenportportname-portsettings&quot;&gt;erlang:open_port(PortName, PortSettings)&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;open_port(PortName, PortSettings) -&amp;gt; port()
Types:
PortName = 
    {spawn, Command :: string() | binary()} |
    {spawn_driver, Command :: string() | binary()} |
    {spawn_executable, FileName :: file:name()} |
    {fd, In :: integer() &amp;gt;= 0, Out :: integer() &amp;gt;= 0}
PortSettings = [Opt]
Opt = 
    {packet, N :: 1 | 2 | 4} |
    stream |
    {line, L :: integer() &amp;gt;= 0} |
    {cd, Dir :: string() | binary()} |
    {env, Env :: [{Name :: string(), Val :: string() | false}]} |
    {args, [string() | binary()]} |
    {arg0, string() | binary()} |
    exit_status |
    use_stdio |
    nouse_stdio |
    stderr_to_stdout |
    in |
    out |
    binary |
    eof |
    {parallelism, Boolean :: boolean()} |
    hide
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;loop2() -&amp;gt;
    receive
        {build} -&amp;gt;
            io:format(&quot;build ...~n&quot;),
            Port = open_port({spawn_executable, &quot;path/build_ios_nolog.sh&quot;}, [stream, exit_status, eof, hide]),
            Result = get_data(Port, []),
            io:format(&quot;~p~n&quot;, [Result]),
            loop2();
        stop -&amp;gt;
            ok;
        _ -&amp;gt;
            io:format(&quot;recv unknown message!~n&quot;),
            loop2()
    end.

get_data(Port, Sofar) -&amp;gt;
    receive
        {Port, {data, Bytes}} -&amp;gt;
            get_data(Port, [Sofar|Bytes]);
        {Port, eof} -&amp;gt;
            Port ! {self(), close},
            receive
                {Port, closed} -&amp;gt; true
            end,
            receive
                {&#39;EXIT&#39;,  Port,  _} -&amp;gt; ok
            after 1 -&amp;gt; ok
            end,
            ExitCode =
            receive
                {Port, {exit_status, Code}} -&amp;gt; Code
            end,
            {ExitCode, lists:flatten(Sofar)}
            %{ExitCode, Sofar}
    end.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</description>
        <pubDate>Tue, 12 Jan 2016 00:00:00 +0800</pubDate>
        <link>http://xiaobin0860.github.io/erlang/2016/01/12/erlang-shell.html</link>
        <guid isPermaLink="true">http://xiaobin0860.github.io/erlang/2016/01/12/erlang-shell.html</guid>
        
        
        <category>erlang</category>
        
      </item>
    
      <item>
        <title>记录一次内存错误debug</title>
        <description>&lt;p&gt;项目在某页面崩溃，ide断在EventDispatcher::cleanToRemovedListeners()。
据断点处信息_toRemovedListeners里有的值retaincount已经为0了，一定是多释放了。
但找半天没找到哪些地方用的不对，都是在onEnter里添加监听，在onExit里取消监听。
去到2dx里代码仓库看最新的提交也没发现有修复类似bug的，应该还是自己代码的原因。
最后没办法了，在所有代码使用listener的地方，添加时先retain，remove时再release。
改着改着就发现一个自定义控件的一个方法在remove里没把listener指针置空，导致onExit时
又释放了一遍。再回头看崩溃页面，果然用到过这个控件。我*&lt;/p&gt;

&lt;p&gt;这种内存错误bug最难调了，崩溃时有效信息不多，而且不一定在什么时候、什么地方才会表现出来。
写代码时一定要注意，指针释放后置空。&lt;/p&gt;

</description>
        <pubDate>Mon, 11 Jan 2016 00:00:00 +0800</pubDate>
        <link>http://xiaobin0860.github.io/cocos2d-x/debug/2016/01/11/2dx-debug.html</link>
        <guid isPermaLink="true">http://xiaobin0860.github.io/cocos2d-x/debug/2016/01/11/2dx-debug.html</guid>
        
        
        <category>cocos2d-x</category>
        
        <category>debug</category>
        
      </item>
    
      <item>
        <title>My first post</title>
        <description>&lt;p&gt;Stay hungry, Stay foolish.&lt;br /&gt;
求知若饥，虚心若愚。&lt;br /&gt;
2016.1.10&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://xiaobin0860.github.io/imgs/20160110.jpg&quot; alt=&quot;小宝&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Sun, 10 Jan 2016 21:04:46 +0800</pubDate>
        <link>http://xiaobin0860.github.io/jekyll/update/2016/01/10/fist-post.html</link>
        <guid isPermaLink="true">http://xiaobin0860.github.io/jekyll/update/2016/01/10/fist-post.html</guid>
        
        
        <category>jekyll</category>
        
        <category>update</category>
        
      </item>
    
      <item>
        <title>AutoBuild(1)</title>
        <description>&lt;p&gt;之前做过几个项目，项目版本发布管理都是件令人头疼的事。资源管理、程序打包有太多人工操作在里面，
只要涉及到人式操作就难免出错。使用打包脚本会减少部分操作，但是每次发版甚至是测试人员要包都很麻烦，
一着急还容易出错。一直想实现一个自动打包、发布系统，减少发布打包人为的修改操作。从页面上直接可以看到
项目各平台编译状况，测试也可以直接从上面下载安装。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;架构、思路

                版本管理系统
                    |
               代码库版本变化
                    |
                ---------
                |       |
                V       V
            平台编译 平台编译
             服务器   服务器
                        |
                        V
                    编译、打包系统
                        |
                        |
                        V
                    管理服务器
                        |
                        V
                       结果
反向：从管理服务器发发布请求到指定平台，平台服务器再向代码仓库拉取最新代码，进行编译。
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;目前已经实现代码库变化，通知编译服务器编译、打包。该系统使用Erlang语言+各种脚本实现。遇到一些问题记录如下：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;svn提交通知，repos/hooks/下面参照post-commit.tmpl写post-commit脚本&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;svn check update，&lt;code class=&quot;highlighter-rouge&quot;&gt;svn status -u -q&lt;/code&gt;，返回结果前面带&lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;的是要更新的&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;erlang集群端口管理
    &lt;ul&gt;
      &lt;li&gt;epmd端口默认4369，使用erl的&lt;code class=&quot;highlighter-rouge&quot;&gt;-epmd &quot;epmd -port 5000 -daemon&quot;&lt;/code&gt;参数调整&lt;/li&gt;
      &lt;li&gt;结点通讯端口使用erl的&lt;code class=&quot;highlighter-rouge&quot;&gt;-kernel inet_dist_listen_min 4000 inet_dist_listen_max 4000&lt;/code&gt;控制&lt;/li&gt;
      &lt;li&gt;集群cookie必须相同, erl的&lt;code class=&quot;highlighter-rouge&quot;&gt;-setcookie xxxxx&lt;/code&gt;可以设置，当然也可能通过HOME下&lt;code class=&quot;highlighter-rouge&quot;&gt;.erlang.cookie&lt;/code&gt;文件修改&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;本想直接利用Erlang天然的分布式支持实现远程通知，可能因为svn服务器对外端口转发我做不了(没权限)，最终没有实现。
我所在办公室做了外网端口转发的两台机器是可以实现的。理论上实现目前的功能，svn服务器只要远程调用通知我的编译服务器，
而我的服务器是做过端口转发的，应该能调到才前。不知道什么原因始终调不到。以后有时间再看是什么原因吧。也考虑过使用thrift，
但之前用过，感觉在erlang中使用不是很方便，再加上考虑到以后要有web界面展示，干脆使用ChicagoBoss实现算了。立马使用ChicagoBoss
创建工程，post-commit直接请求url通知，加上之前积累的编译、打包脚本，很快上面流程里的功能实现了。现在测试来要包立马就有新包了^_^&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;http://xiaobin0860.github.io/imgs/20160108.jpg&quot; alt=&quot;亲&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Fri, 08 Jan 2016 00:00:00 +0800</pubDate>
        <link>http://xiaobin0860.github.io/erlang/autobuild/2016/01/08/autobuild(1).html</link>
        <guid isPermaLink="true">http://xiaobin0860.github.io/erlang/autobuild/2016/01/08/autobuild(1).html</guid>
        
        
        <category>erlang</category>
        
        <category>autobuild</category>
        
      </item>
    
      <item>
        <title>markdown syntax</title>
        <description>&lt;p&gt;Markdown is a superset of HTML, so any HTML file is a valid Markdown.
&lt;!-- This means we can use HTML elements in Markdown. --&gt;&lt;/p&gt;

&lt;h2 id=&quot;headings&quot;&gt;Headings&lt;/h2&gt;

&lt;h1 id=&quot;this-is-an-h1&quot;&gt;This is an h1&lt;/h1&gt;
&lt;p&gt;## This is an h2
### This is an h3
#### This is an h4
##### This is an h5
###### This is an h6&lt;/p&gt;

&lt;h1 id=&quot;this-is-an-h1-1&quot;&gt;This is an h1&lt;/h1&gt;
&lt;p&gt;This is an h2
————-&lt;/p&gt;

&lt;h2 id=&quot;text-styles&quot;&gt;Text styles&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;This text is in italics.&lt;/em&gt;&lt;br /&gt;
&lt;em&gt;And so is this text&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;This text is in bold&lt;/strong&gt;&lt;br /&gt;
&lt;strong&gt;And so is this text&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;This text is in both.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;~~This text is rendered with strikethrough.~~&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;monospace&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;paragraphs&quot;&gt;Paragraphs&lt;/h2&gt;

&lt;p&gt;This is a paragraph.&lt;/p&gt;

&lt;p&gt;Now I’m in paragraph 2.
I’m still in paragraph 2 too!&lt;/p&gt;

&lt;p&gt;I’m in paragraph three!&lt;/p&gt;

&lt;p&gt;Leave 2 spaces at the end of a line to to a&lt;br /&gt;
line break&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;This is a block quote. You can&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;manually wrap your lines and put a &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt;&lt;/code&gt; before every line.
You can also use more than one level
&amp;gt; of indentation.
How neat is that?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;lists&quot;&gt;Lists&lt;/h2&gt;

&lt;p&gt;Unordered lists&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Item1&lt;/li&gt;
  &lt;li&gt;Item2&lt;/li&gt;
  &lt;li&gt;Item3&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Item1&lt;/li&gt;
  &lt;li&gt;Item2&lt;/li&gt;
  &lt;li&gt;Item3&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Item1&lt;/li&gt;
  &lt;li&gt;Item2&lt;/li&gt;
  &lt;li&gt;Item3&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ordered lists&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Item1
    &lt;ul&gt;
      &lt;li&gt;Sub1&lt;/li&gt;
      &lt;li&gt;Sub2&lt;/li&gt;
      &lt;li&gt;Sub3&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Item2&lt;/li&gt;
  &lt;li&gt;Item3&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;code-blocks&quot;&gt;Code blocks&lt;/h2&gt;

&lt;p&gt;You can indicate a code block by indenting a line with four spaces or a tab.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-module(test).
-export([test/0]).

test() -&amp;gt;
    io:format(&quot;Hello World!~n&quot;).
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;links&quot;&gt;Links&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://xiaobin0860.github.io&quot;&gt;xl000&lt;/a&gt;
&amp;lt;l_xb@foxmail.com&amp;gt;&lt;/p&gt;

</description>
        <pubDate>Wed, 06 Jan 2016 00:00:00 +0800</pubDate>
        <link>http://xiaobin0860.github.io/markdown/2016/01/06/markdown.html</link>
        <guid isPermaLink="true">http://xiaobin0860.github.io/markdown/2016/01/06/markdown.html</guid>
        
        
        <category>markdown</category>
        
      </item>
    
  </channel>
</rss>
