---
layout: post
title: "bugs-2021"
date: 2021-01-01
categories: bug
---

---

## 问题:

某模块单元测试通过本机服务也没问题，发到内测服上测试却不是期望结果
好像数据没保存

## 原因:

重置逻辑是后来加的，记录下个重置时间点却写到之前实现的判定首次初始化块中，导致旧玩家下个重置时间点为 0，每次操作都检查达到重置时间，导致数据被重置

## 怎么发现的:

开发人员发现操作后数据不正确

## 修复:

将检查重置逻辑移到初始化逻辑外面

## 教训:

1. 加新功能时要注意兼容旧数据

---

![宝]({{ site.url }}/imgs/20210110.jpg)
